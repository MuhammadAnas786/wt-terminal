<html>
   
<head>
    <link rel="stylesheet" href="../styling/Form.css">
    <meta charset="utf-8">
    <script src="https://unpkg.com/ionicons@5.2.3/dist/ionicons.js"></script>
    <title>Untitled Document</title>
</head>
<style>
      a {
        color: aqua;
    }
    form a {
        font-size: 20px;
        text-transform: capitalize;
        
    }
    form{
        margin-bottom: 10rem;
    }
    form h1{
        margin-left:3rem;
        margin-top: 1rem;
        color: white;
    }
    .centric{
        margin-left: 8rem;
        font-size: 1.4rem;
    }

</style>
    <body>
        <div class="main">
            <form id="myForm">
                <a href="Login.html">Already have an account? Login <a></a>
                    <br/>
                   <p class="centric">or</p>

                <h1>Signup Now!</h1>
                <p> name:</p>
                <input type="text" name="fullname" border="5px solid"><br>

        <p>email:</p><br>
        <input type="email" name="email" border="5px solid"><br>

       
        <p>Gender:</p><br>
        <p>MALE</p><br>
        <input type="radio" value="male" onchange="changeDiv(this)" checked="checked" name="gender">
        
        <p>FEMALE</p><br>
        <input type="radio" value="female"  onchange="changeDiv(this)"  name="gender" border="5px solid">
        
        <p>others</p><br>
        <input type="radio" value="others"  onchange="changeDiv(this)"  name="gender" border="5px solid">

        <p>Password:</p>
        <input type="password" required name="password"/>

        <p>Repeat Password:</p>
        <input type="password" required name="repeat_password"><br/>

        <input type="submit" onclick="Submit(event)" value="submit" width="50px" class="button"><br/>
       
    </form>
    </div>
    </body>
    <script>
       function Submit(event){
        event.preventDefault();
       let fullname=document.getElementById("myForm").elements.namedItem("fullname").value;
       let gender=document.getElementById("myForm").elements.namedItem("gender").value;
       let email=document.getElementById("myForm").elements.namedItem("email").value;
       let password=document.getElementById("myForm").elements.namedItem("password").value;
       let repeat_password=document.getElementById("myForm").elements.namedItem("repeat_password").value

        let url=`https://web-terminal-anas.herokuapp.com/api/v1/register`
        let object={
    fullname,email,gender,password,repeat_password

};
let method = 'POST'
console.log(object)
let options =  {
      
      // Adding method type
      
      method: method,
        
      // Adding body or contents to send
      body: JSON.stringify(object),
        
      // Adding headers to the request
      headers: {
          "Content-type": "application/json; charset=UTF-8"
      }
  }
            fetch(url,options).then(res=>{
        
        res.json().then(data=>{
            console.log(data)
            if(res.status==200)
             window.location.href="Login.html";
            else window.alert(data.error)
        }).catch(err=>{
            console.log(err);
            
        });
            
        }).catch(err=>{
            console.log(err);
            window.alert("error saving the credentials")
        });
     
    }



    </script>
</html>